(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(58)},23:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(3),c=n.n(o),s=(n(23),n(4)),r=n(5),l=n(7),u=n(6),d=n(8),h=n(1),f=function(e){return fetch("".concat("https://api.foursquare.com/v2/venues/").concat(e,"?&v=20190218&client_id=").concat("OP2DMM25VI5LYWWYPTBK1IZUEICXH3KLIH1DGY4BWM0LHDYQ","&client_secret=").concat("Z4FBTHDAAMZ21ZFS5QDE2NUWT52WOIPBWMKJ3TBHBYMU54QY")).then(function(e){return e.json()}).then(function(e){return 200===e.meta.code?{status:"success",content:e.response.venue}:{status:"error",content:e.meta.code}}).catch(function(e){return e})},p=n(10),m=n(16),v=n.n(m),w=n(17),g=n.n(w),b=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateQuery=function(e){n.setState({query:e}),n.props.onUpdateShowingPlaces(e)},n.hideListCard=function(e){n.setState({showListCard:!n.state.showListCard})},n.clickItem=function(e){n.props.onSelectPlace(e.target.dataset.id),n.hideListCard()},n.state={query:"",showListCard:!0},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.updateIsShow()}},{key:"updateIsShow",value:function(){this.props.mapWidth<750&&this.setState({showListCard:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.showingPlaces,a=t.selectedPlace,o=this.state.query;return i.a.createElement("div",{className:"card border-secondary",id:"item-list"},i.a.createElement("div",{className:"card-header"},i.a.createElement("button",{className:"btn btn-info",onClick:this.hideListCard},this.state.showListCard?"\u25bc":"\u25b2"),i.a.createElement("h5",null,"Universities in QingDao")),i.a.createElement("div",{className:this.state.showListCard?"card-body":"hidden"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u67e5\u8be2",value:o,onChange:function(t){return e.updateQuery(t.target.value)}})),i.a.createElement("ul",{className:this.state.showListCard?"list-group list-group-flush":"hidden"},n.map(function(t){return i.a.createElement("li",{key:t.universityId},i.a.createElement("button",{className:t.universityId===a.universityId?"list-group-item active":"list-group-item","data-id":t.universityId,onClick:e.clickItem},t.name))})))}}]),t}(i.a.Component),P=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateShowingPlaces=function(e){var t=n.state.showingPlaces;if(e){var a=new RegExp(v()(e),"i");t=n.props.allUniversities.filter(function(e){return a.test(e.name)})}else t=n.props.allUniversities;t.includes(n.state.selectedPlace)||n.setState({selectedPlace:{}}),n.setState({showingPlaces:t})},n.selectPlace=function(e){n.state.showingPlaces.forEach(function(t){t.universityId===e&&n.setState({selectedPlace:t})}),f(e).then(function(e){n.setState({venueData:e})})},n.unSelectPlace=function(){n.setState({selectedPlace:{},venueData:{}})},n.onMarkerClick=function(e,t,a){n.selectPlace(e.id)},n.onCloseInfoWindow=function(){n.unSelectPlace()},n.state={showingPlaces:[],selectedPlace:{},venueData:{},mapWidth:{}},n.updateShowingPlaces=n.updateShowingPlaces.bind(Object(h.a)(Object(h.a)(n))),n.selectPlace=n.selectPlace.bind(Object(h.a)(Object(h.a)(n))),n.unSelectPlace=n.unSelectPlace.bind(Object(h.a)(Object(h.a)(n))),n.onMarkerClick=n.onMarkerClick.bind(Object(h.a)(Object(h.a)(n))),n.onCloseInfoWindow=n.onCloseInfoWindow.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.updateShowingPlaces("")}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.showingPlaces,o=n.selectedPlace,c=n.venueData,s=this.props.size.width;return c?"success"===c.status?e=i.a.createElement("div",null,i.a.createElement("h5",null,i.a.createElement("a",{href:c.content.canonicalUrl},c.content.name)),i.a.createElement("h5",null,o.name)):"error"===c.status&&(e=i.a.createElement("div",null,i.a.createElement("h5",null,"\u9519\u8bef\u7801 ",c.content),i.a.createElement("h6",null,"\u6ca1\u540e\u627e\u5230\u4efb\u4f55\u5185\u5bb9!"))):e=i.a.createElement("div",null,i.a.createElement("h6",null,"\u6b63\u5728\u52a0\u8f7d")),i.a.createElement(p.Map,{google:this.props.google,zoom:this.props.zoom,initialCenter:this.props.center,mapTypeControl:!1},a.map(function(e){return i.a.createElement(p.Marker,{key:e.universityId,id:e.universityId,name:e.name,onClick:t.onMarkerClick,position:e.pos})}),i.a.createElement(b,{showingPlaces:this.state.showingPlaces,selectedPlace:this.state.selectedPlace,onUpdateShowingPlaces:this.updateShowingPlaces,onSelectPlace:this.selectPlace,mapWidth:s}),i.a.createElement(p.InfoWindow,{position:o.pos,visible:!!o,onClose:this.onCloseInfoWindow},e))}}]),t}(i.a.Component);P.defaultProps={center:{lat:36.100461,lng:120.436026},zoom:10};var y=g()()(Object(p.GoogleApiWrapper)({apiKey:"AIzaSyCacmIGcWsolGnXLp71cBM_My9axyprocM"})(P)),C=[{name:"QUST(\u9752\u5c9b\u79d1\u6280\u5927\u5b66)",pos:{lat:36.126442,lng:120.487295},universityId:"58b6b4fb6431e5261489f826"},{name:"QDU(\u9752\u5c9b\u5927\u5b66)",pos:{lat:36.076293,lng:120.424278},universityId:"4b92350ef964a5205aec33e3"},{name:"QTU(\u9752\u5c9b\u7406\u5de5\u5927\u5b66)",pos:{lat:36.107448,lng:120.377628},universityId:"4ef6dbde775b54cdb40b1df1"},{name:"QAU(\u9752\u5c9b\u519c\u4e1a\u5927\u5b66)",pos:{lat:36.327029,lng:120.404108},universityId:"57f33d01498e474776f6ca72"},{name:"OUC(\u4e2d\u56fd\u6d77\u6d0b\u5927\u5b66)",pos:{lat:36.167816,lng:120.505352},universityId:"4c9f56902fb1a14360aff240"},{name:"UPC(\u4e2d\u56fd\u77f3\u6cb9\u5927\u5b66)",pos:{lat:35.947633,lng:120.18217},universityId:"4d9d463f7958f04d67eb12fa"}],E=(n(54),n(56),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(y,{allUniversities:C}))}}]),t}(a.Component)),k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(i.a.createElement(E,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");k?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):I(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):I(e)})}}()}},[[18,2,1]]]);
//# sourceMappingURL=main.9b0b8751.chunk.js.map